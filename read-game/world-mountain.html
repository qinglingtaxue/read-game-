<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ä¸–ç•Œä¹‹å±±æ¢ç´¢ä¹‹æ—…</title>
    <link rel="stylesheet" href="css/sun-mountain.css">
    <link rel="stylesheet" href="css/world-mountain.css">
</head>
<body>
    <button class="back-btn" onclick="goBack()">â† è¿”å›å…¨æ™¯</button>

    <!-- è¿›åº¦æ˜¾ç¤º -->
    <div class="progress-display">
        <span class="mountain-progress">ä¸–ç•Œå±±è¿›åº¦ï¼š<span id="mountain-progress">0/28</span></span>
        <span class="total-progress">æ€»è¿›åº¦ï¼š<span id="total-progress">0/420</span></span>
    </div>
    
    <div class="mountain-scene">
        <!-- æœˆäº® -->
        <div class="moon"></div>
        
        <!-- æ˜Ÿåº§ -->
        <div class="star-cluster star-cluster1">
            <div class="star-in-cluster"></div>
            <div class="star-in-cluster"></div>
            <div class="star-in-cluster"></div>
            <div class="star-in-cluster"></div>
            <div class="star-in-cluster"></div>
        </div>
        <div class="star-cluster star-cluster2">
            <div class="star-in-cluster"></div>
            <div class="star-in-cluster"></div>
            <div class="star-in-cluster"></div>
            <div class="star-in-cluster"></div>
            <div class="star-in-cluster"></div>
        </div>
        
        <!-- å±±è„‰å±‚æ¬¡ -->
        <div class="distant-mountains"></div>
        <div class="middle-mountains"></div>
        <div class="front-mountains"></div>

        <!-- ç§‘å­¦ä¹‹æ²³ -->
        <div class="science-rivers">
            <div class="science-river river-evolution"></div>
            <div class="science-river river-astronomy"></div>
            <div class="science-river river-physics"></div>
            <div class="science-river river-biology"></div>
        </div>
        
        <!-- æ²³è¾¹çš„ç§‘å­¦å®¶ä»¬ -->
        <div class="scientists-by-river">
            <div class="scientist-figure scientist-darwin" data-range="evolution" onclick="exploreRange('evolution')">
                <div class="scientist-avatar">ğŸ§¬</div>
                <div class="scientist-name">è¿›åŒ–è®º</div>
            </div>
            
            <div class="scientist-figure scientist-hawking" data-range="astronomy" onclick="exploreRange('astronomy')">
                <div class="scientist-avatar">ğŸŒŒ</div>
                <div class="scientist-name">å¤©æ–‡å­¦</div>
            </div>
            
            <div class="scientist-figure scientist-einstein" data-range="physics" onclick="exploreRange('physics')">
                <div class="scientist-avatar">âš›ï¸</div>
                <div class="scientist-name">ç‰©ç†å­¦</div>
            </div>
            
            <div class="scientist-figure scientist-watson" data-range="biology" onclick="exploreRange('biology')">
                <div class="scientist-avatar">ğŸ§ª</div>
                <div class="scientist-name">ç”Ÿç‰©å­¦</div>
            </div>
            
        </div>

       


        <!-- å³ä¸Šè§’æ™ºè€…åŒºåŸŸ - åœ¨ </div> (exploration-hintç»“æŸ) ä¹‹åæ·»åŠ  -->
        <div class="right-side-sages">
            <!-- æ€»è®ºæ™ºè€… -->
            <div class="sage-figure sage-overview" data-sage="overview" onclick="exploreSage('overview')">
                <div class="sage-avatar">ğŸ”®</div>
                <div class="sage-name">æ€»è®º</div>
            </div>

            
            
            <!-- å…¶ä»–æ™ºè€… -->
            <div class="sage-figure sage-hegel" data-sage="hegel" onclick="exploreSage('hegel')">
                <div class="sage-avatar">ğŸ­</div>
                <div class="sage-name">é»‘æ ¼å°”</div>
            </div>
            
            <div class="sage-figure sage-heidegger" data-sage="heidegger" onclick="exploreSage('heidegger')">
                <div class="sage-avatar">ğŸŒ²</div>
                <div class="sage-name">æµ·å¾·æ ¼å°”</div>
            </div>
            
            <div class="sage-figure sage-sartre" data-sage="sartre" onclick="exploreSage('sartre')">
                <div class="sage-avatar">ğŸ¯</div>
                <div class="sage-name">è¨ç‰¹</div>
            </div>
            
            <div class="sage-figure sage-dewitt" data-sage="dewitt" onclick="exploreSage('dewitt')">
                <div class="sage-avatar">ğŸ”¬</div>
                <div class="sage-name">å¾·å¨ç‰¹</div>
            </div>
            
            <div class="sage-figure sage-darwin" data-sage="darwin" onclick="exploreSage('darwin')">
                <div class="sage-avatar">ğŸ¦</div>
                <div class="sage-name">è¾¾å°”æ–‡</div>
            </div>
            
            <div class="sage-figure sage-einstein" data-sage="einstein" onclick="exploreSage('einstein')">
                <div class="sage-avatar">âš¡</div>
                <div class="sage-name">çˆ±å› æ–¯å¦</div>
            </div>
            
            <div class="sage-figure sage-simon" data-sage="simon" onclick="exploreSage('simon')">
                <div class="sage-avatar">ğŸ§ </div>
                <div class="sage-name">è¥¿è’™</div>
            </div>
        </div>
        
        <!-- å¯¼æ¸¸äººç‰©å’Œå¯¹è¯æ°”æ³¡ -->
        <div class="guide-section">
            <div class="guide-character">
                <div class="guide-avatar">ğŸ§™â€â™‚ï¸</div>
                <div class="guide-name">ç§‘å­¦å‘å¯¼</div>
            </div>
            <div class="speech-bubble">
                <div class="bubble-content">
                    <h3>ğŸŒ æ¬¢è¿æ¥åˆ°ä¸–ç•Œä¹‹å±±</h3>
                    <p>åœ¨è¿™åº§ç¥ç§˜çš„å¤œè‰²å±±å³°ä¸Šï¼Œå››æ¡ç§‘å­¦ä¹‹æ²³é™é™æµæ·Œã€‚è¿›åŒ–ä¹‹æ²³å­•è‚²ç”Ÿå‘½å¥¥ç§˜ï¼Œå¤©æ–‡ä¹‹æ²³è¿æ¥æ˜Ÿç©ºæ™ºæ…§ï¼Œç‰©ç†ä¹‹æ²³æ‰¿è½½å®‡å®™æ³•åˆ™ï¼Œç”Ÿç‰©ä¹‹æ²³è§£è¯»ç”Ÿå‘½å¯†ç ã€‚28ä½ç§‘å­¦å·¨åŒ åœ¨æ­¤ç­‰å€™ã€‚</p>
                </div>
                <div class="bubble-tail"></div>
            </div>
        </div>

        <!-- æ¢ç´¢æç¤º -->
        <div class="exploration-hint">
            ğŸ”¬ ç‚¹å‡»ç§‘å­¦å›¾æ ‡æ¢ç´¢å±±è„‰
        </div>
    </div>

    <!-- èƒŒæ™¯éŸ³ä¹ -->
    <audio id="bgMusic" loop>
        <source src="music/sun-mountain-bg.MP3" type="audio/mpeg">
        <source src="music/sun-mountain-bg.MP3" type="audio/ogg">
    </audio>

    <!-- éŸ³ä¹æ§åˆ¶æŒ‰é’® -->
    <button class="music-toggle" id="musicBtn" onclick="toggleBgMusic()">ğŸµ</button>

    <script>
        // è¿”å›å…¨æ™¯å›¾
        function goBack() {
            window.location.href = 'index.html';
        }

        // æ¢ç´¢å±±è„‰
        function exploreRange(rangeId) {
            window.location.href = `ranges/world/${rangeId}-range.html`;
        }

        // åœ¨ç¬¬93è¡Œä¹‹åæ·»åŠ è¿™ä¸ªå‡½æ•°
        function exploreSage(sageId) {
        window.location.href = `sages/world/${cleanId}.html`;
        }

        // æ¢ç´¢æ™ºè€…
        function exploreSage(sageId) {
            window.location.href = `sages/world/${sageId}.html`;
        }

        // æ£€æŸ¥å±±å³°å®ŒæˆçŠ¶æ€
        function checkMountainComplete() {
            const visitedSages = JSON.parse(localStorage.getItem('visitedSages') || '[]');
            const worldRanges = ['evolution', 'astronomy', 'physics', 'biology'];
            const allWorldSages = [];
            
            // æ¯ä¸ªå±±è„‰7ä¸ªæ™ºè€…
            worldRanges.forEach(range => {
                for (let i = 1; i <= 7; i++) {
                    allWorldSages.push(`world-${range}-${i}`);
                }
            });
            
            const completedCount = allWorldSages.filter(sage => visitedSages.includes(sage)).length;
            
            document.getElementById('mountain-progress').textContent = `${completedCount}/28`;
            document.getElementById('total-progress').textContent = `${visitedSages.length}/420`;
            
            // æ›´æ–°å±±è„‰å®ŒæˆçŠ¶æ€æ˜¾ç¤º
            worldRanges.forEach(range => {
                const rangeElement = document.querySelector(`[data-range="${range}"]`);
                if (rangeElement) {
                    const rangeSages = allWorldSages.filter(sage => sage.includes(range));
                    const rangeCompleted = rangeSages.filter(sage => visitedSages.includes(sage)).length;
                    
                    if (rangeCompleted === 7) {
                        rangeElement.classList.add('visited');
                    }
                }
            });
            
            // æ£€æŸ¥æ˜¯å¦å®Œæˆæ•´åº§å±±
            if (completedCount === 28 && !localStorage.getItem('worldMountainCompleted')) {
                localStorage.setItem('worldMountainCompleted', 'true');
                showNextMountainOption();
            }
        }

        // æ˜¾ç¤ºå‰å¾€ä¸‹ä¸€åº§å±±çš„é€‰é¡¹
        function showNextMountainOption() {
            const modal = document.createElement('div');
            modal.style.cssText = `
                position: fixed; top: 0; left: 0; width: 100%; height: 100%;
                background: rgba(0,0,0,0.7); display: flex; justify-content: center; align-items: center; z-index: 2000;
            `;
            
            modal.innerHTML = `
                <div style="background: white; padding: 30px; border-radius: 15px; text-align: center; max-width: 400px; position: relative;">
                    <span onclick="this.parentElement.parentElement.remove()" 
                          style="position: absolute; top: 15px; right: 20px; cursor: pointer; font-size: 24px; color: #999; font-weight: bold; user-select: none;">&times;</span>
                    
                    <h3 style="color: #4169E1; margin-bottom: 20px;">ğŸ‰ æ­å–œå®Œæˆä¸–ç•Œå±±æ¢ç´¢ï¼</h3>
                    <p style="margin-bottom: 20px;">ä½ å·²ä¸ä¸–ç•Œå±±çš„æ‰€æœ‰28ä½ç§‘å­¦æ™ºè€…å¯¹è¯ï¼ŒæŒæ¡äº†è‡ªç„¶ä¸–ç•Œçš„æ ¸å¿ƒå¥¥ç§˜ã€‚</p>
                    
                    <button onclick="goToNextMountain()" style="background: #4169E1; color: white; border: none; padding: 12px 25px; border-radius: 25px; margin: 5px; cursor: pointer;">å‰å¾€å†å²å±±</button>
                    <button onclick="goBack()" style="background: #1a1a2e; color: white; border: none; padding: 12px 25px; border-radius: 25px; margin: 5px; cursor: pointer;">è¿”å›å…¨æ™¯</button>
                </div>
            `;
            
            document.body.appendChild(modal);
        }

        // å‰å¾€ä¸‹ä¸€åº§å±±
        function goToNextMountain() {
            window.location.href = 'history-mountain.html';
        }

        // èƒŒæ™¯éŸ³ä¹æ§åˆ¶
        const bgMusic = document.getElementById('bgMusic');
        const musicBtn = document.getElementById('musicBtn');

        if (bgMusic) {
            bgMusic.volume = 0.3;
        }

        function toggleBgMusic() {
            if (!bgMusic) return;
            
            if (bgMusic.paused) {
                bgMusic.play().then(() => {
                    musicBtn.textContent = 'ğŸ”Š';
                }).catch(error => {
                    console.log('æ’­æ”¾å¤±è´¥ï¼Œè¯·æ£€æŸ¥éŸ³é¢‘æ–‡ä»¶');
                });
            } else {
                bgMusic.pause();
                musicBtn.textContent = 'ğŸ”‡';
            }
        }

        // ç”¨æˆ·é¦–æ¬¡äº¤äº’æ—¶å°è¯•æ’­æ”¾
        let hasInteracted = false;
        document.addEventListener('click', function() {
            if (!hasInteracted && bgMusic) {
                hasInteracted = true;
                bgMusic.play().then(() => {
                    musicBtn.textContent = 'ğŸ”Š';
                }).catch(() => {
                    // é™é»˜å¤„ç†
                });
            }
        });

        // é¡µé¢åŠ è½½æ—¶æ£€æŸ¥çŠ¶æ€
        window.addEventListener('load', checkMountainComplete);
        
        
    </script>
</body>
</html>