<!DOCTYPE html>
<html lang="zh-CN" data-mountain="beliefs">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ä¿¡ä»°å±±æ¢ç´¢ä¹‹æ—…</title>
    <link rel="stylesheet" href="css/color-schemes.css">
    <<link rel="stylesheet" href="css/beliefs-mountain.css">
</head>
<body>
    <button class="back-btn" onclick="goBack()">â† è¿”å›å…¨æ™¯</button>

    <!-- è¿›åº¦æ˜¾ç¤º -->
    <div class="progress-display">
        <span class="mountain-progress">ä¿¡ä»°å±±è¿›åº¦ï¼š<span id="mountain-progress">0/7</span></span>
        <span class="total-progress">æ€»è¿›åº¦ï¼š<span id="total-progress">0/420</span></span>
    </div>
    
    <div class="mountain-scene">
        <!-- ä¸»è¦è£…é¥°å…ƒç´ ï¼ˆæ ¹æ®å„å±±å³°ä¸»é¢˜ï¼‰ -->
        <div class="main-decoration"></div>
        
        <!-- è£…é¥°å…ƒç´  -->
        <div class="theme-decorations">
            <!-- å„å±±å³°ç‰¹è‰²è£…é¥° -->
        </div>
        
        <!-- äº‘æœµ -->
        <div class="cloud cloud1"></div>
        <div class="cloud cloud2"></div>
        
        <!-- å±±è„‰å±‚æ¬¡ -->
        <div class="distant-mountains"></div>
        <div class="middle-mountains"></div>
        <div class="front-mountains"></div>

        <!-- å››æ¡ä¿¡ä»°ä¹‹æ²³ -->
        <div class="rivers">
            <div class="river river-first" title="è™”è¯šä¹‹æ²³"></div>
            <div class="river river-second" title="å¸Œæœ›ä¹‹æ²³"></div>
            <div class="river river-third" title="æ•‘èµä¹‹æ²³"></div>
            <div class="river river-fourth" title="çœŸç†ä¹‹æ²³"></div>
        </div>
        
        <!-- æ²³è¾¹çš„æ™ºè€…ä»¬ -->
        <div class="sages-by-river">
            <div class="sage-figure sage-hume" data-sage="hume" onclick="exploreRiver('hume')">
                <div class="sage-avatar">ğŸ¤”</div>
                <div class="sage-name">ä¼‘è°Ÿ</div>
            </div>
            <div class="sage-figure sage-russell" data-sage="russell" onclick="exploreRiver('russell')">
                <div class="sage-avatar">ğŸ”¬</div>
                <div class="sage-name">ç½—ç´ </div>
            </div>
            <div class="sage-figure sage-dawkins" data-sage="dawkins" onclick="exploreRiver('dawkins')">
                <div class="sage-avatar">ğŸ§¬</div>
                <div class="sage-name">é“é‡‘æ–¯</div>
            </div>
            <div class="sage-figure sage-sagan" data-sage="sagan" onclick="exploreRiver('sagan')">
                <div class="sage-avatar">ğŸŒŒ</div>
                <div class="sage-name">è¨æ ¹</div>
            </div>
            <div class="sage-figure sage-yangming" data-sage="yangming" onclick="exploreRiver('yangming')">
                <div class="sage-avatar">â˜¯ï¸</div>
                <div class="sage-name">ç‹é˜³æ˜</div>
            </div>
            <div class="sage-figure sage-james" data-sage="james" onclick="exploreRiver('james')">
                <div class="sage-avatar">ğŸ’­</div>
                <div class="sage-name">è©¹å§†æ–¯</div>
            </div>
            <div class="sage-figure sage-haidt" data-sage="haidt" onclick="exploreRiver('haidt')">
                <div class="sage-avatar">âš–ï¸</div>
                <div class="sage-name">æµ·ç‰¹</div>
            </div>
        </div>
        
        <!-- å¯¼æ¸¸äººç‰©å’Œå¯¹è¯æ°”æ³¡ -->
        <div class="guide-section">
            <div class="guide-character">
                <div class="guide-avatar">ğŸ™</div>
                <div class="guide-name">ä¿¡ä»°å‘å¯¼</div>
            </div>
            <div class="speech-bubble">
                <div class="bubble-content">
                    <h3>ğŸ™ åœ¨å¤©å¤–ï¼Œæœ‰ä¸€åº§ä¿¡ä»°å±±</h3>
                    <p>ä¿¡ä»°å±±é‡Œæœ‰å››æ¡æ²³ï¼Œå«è™”è¯šä¹‹æ²³ã€å¸Œæœ›ä¹‹æ²³ã€æ•‘èµä¹‹æ²³ã€çœŸç†ä¹‹æ²³ï¼Œæ²³æ°´ç»ˆæ—¥å·æµä¸æ¯ï¼Œå­•è‚²äº†äººç±»çš„æ™ºæ…§ã€‚</p>
                </div>
                <div class="bubble-tail"></div>
            </div>
        </div>

        <!-- æ¢ç´¢æç¤º -->
        <div class="exploration-hint">
            ğŸ™ ç‚¹å‡»æ²³è¾¹çš„æ™ºè€…å¼€å§‹å¯¹è¯
        </div>
    </div>

    <!-- èƒŒæ™¯éŸ³ä¹ -->
    <audio id="bgMusic" loop>
        <source src="music/sun-mountain-bg.mp3" type="audio/mpeg">
        <source src="music/sun-mountain-bg.ogg" type="audio/ogg">
    </audio>

    <!-- éŸ³ä¹æ§åˆ¶æŒ‰é’® -->
    <button class="music-toggle" id="musicBtn" onclick="toggleBgMusic()">ğŸµ</button>

    <script>
        // è¿”å›å…¨æ™¯å›¾
        function goBack() {
            window.location.href = 'index.html';
        }

        // æ‹œè®¿æ™ºè€…
        function exploreRiver(sageId) {
            // è·³è½¬åˆ° sages/beliefs æ–‡ä»¶å¤¹ä¸‹çš„æ™ºè€…é¡µé¢
            window.location.href = `sages/beliefs/${sageId}.html`;
        }

        // æ£€æŸ¥å±±å³°å®ŒæˆçŠ¶æ€
        function checkMountainComplete() {
            const visitedSages = JSON.parse(localStorage.getItem('visitedSages') || '[]');
            const believesSages = ['hume', 'russell', 'dawkins', 'sagan', 'yangming', 'james', 'haidt'];
            const completedCount = believesSages.filter(sage => visitedSages.includes(`beliefs-${sage}`)).length;
            
            document.getElementById('mountain-progress').textContent = `${completedCount}/7`;
            document.getElementById('total-progress').textContent = `${visitedSages.length}/420`;
            
            // æ›´æ–°æ™ºè€…çŠ¶æ€æ˜¾ç¤º
            believesSages.forEach(sage => {
                const sageElement = document.querySelector(`[data-sage="${sage}"]`);
                if (visitedSages.includes(`beliefs-${sage}`)) {
                    sageElement.classList.add('visited');
                }
            });
            
            // åªæœ‰åœ¨åˆšå¥½å®Œæˆä¿¡ä»°å±±æ—¶æ˜¾ç¤ºæç¤ºï¼ˆé¿å…é‡å¤æ˜¾ç¤ºï¼‰
            if (completedCount === 7 && !localStorage.getItem('beliefsMountainCompleted')) {
                localStorage.setItem('beliefsMountainCompleted', 'true');
                showNextMountainOption();
            }
        }

        // æ˜¾ç¤ºå‰å¾€ä¸‹ä¸€åº§å±±çš„é€‰é¡¹
        function showNextMountainOption() {
            const modal = document.createElement('div');
            modal.style.cssText = `
                position: fixed; top: 0; left: 0; width: 100%; height: 100%;
                background: rgba(0,0,0,0.7); display: flex; justify-content: center; align-items: center; z-index: 2000;
            `;
            
            modal.innerHTML = `
                <div style="background: white; padding: 30px; border-radius: 15px; text-align: center; max-width: 400px; position: relative;">
                    <span onclick="this.parentElement.parentElement.remove()" 
                  style="position: absolute; top: 15px; right: 20px; cursor: pointer; font-size: 24px; color: #999; font-weight: bold; user-select: none;">&times;</span>
                    
                    <h3 style="color: var(--primary-color); margin-bottom: 20px;">ğŸ™ æ­å–œå®Œæˆä¿¡ä»°å±±æ¢ç´¢ï¼</h3>
                    <p style="margin-bottom: 20px;">ä½ å·²æ‹œè®¿äº†ä¿¡ä»°å±±çš„æ‰€æœ‰7ä½æ™ºè€…ï¼Œè·å¾—äº†çè´µçš„æ™ºæ…§ã€‚</p>
                    
                    <button onclick="goToNextMountain()" style="background: var(--primary-color); color: white; border: none; padding: 12px 25px; border-radius: 25px; margin: 5px; cursor: pointer;">å‰å¾€ä¸‹ä¸€åº§å±±</button>
                    <button onclick="goBack()" style="background: var(--secondary-color); color: white; border: none; padding: 12px 25px; border-radius: 25px; margin: 5px; cursor: pointer;">è¿”å›å…¨æ™¯</button>
                </div>
            `;
            
            document.body.appendChild(modal);
        }

        // å‰å¾€ä¸‹ä¸€åº§å±±
        function goToNextMountain() {
            // è¿™é‡Œéœ€è¦æ ¹æ®å®é™…çš„å±±å³°é¡ºåºæ¥è®¾ç½®
            window.location.href = 'index.html';
        }

        // èƒŒæ™¯éŸ³ä¹æ§åˆ¶
        const bgMusic = document.getElementById('bgMusic');
        const musicBtn = document.getElementById('musicBtn');

        if (bgMusic) {
            bgMusic.volume = 0.3;
        }

        function toggleBgMusic() {
            if (!bgMusic) return;
            
            if (bgMusic.paused) {
                bgMusic.play().then(() => {
                    musicBtn.textContent = 'ğŸ”Š';
                }).catch(error => {
                    console.log('æ’­æ”¾å¤±è´¥ï¼Œè¯·æ£€æŸ¥éŸ³é¢‘æ–‡ä»¶');
                });
            } else {
                bgMusic.pause();
                musicBtn.textContent = 'ğŸ”‡';
            }
        }

        let hasInteracted = false;
        document.addEventListener('click', function() {
            if (!hasInteracted && bgMusic) {
                hasInteracted = true;
                bgMusic.play().then(() => {
                    musicBtn.textContent = 'ğŸ”Š';
                }).catch(() => {});
            }
        });

        window.addEventListener('load', checkMountainComplete);
    </script>

    <style>
    .music-toggle {
        position: fixed;
        top: 70px;
        right: 20px;
        background: rgba(255, 255, 255, 0.9);
        border: none;
        border-radius: 50%;
        width: 50px;
        height: 50px;
        font-size: 20px;
        cursor: pointer;
        z-index: 1001;
        transition: all 0.3s ease;
        box-shadow: 0 2px 10px rgba(0,0,0,0.2);
    }

    .music-toggle:hover {
        transform: scale(1.1);
        background: rgba(255, 255, 255, 1);
    }
    </style>
</body>
</html>