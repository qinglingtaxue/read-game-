<!DOCTYPE html>
<html lang="zh-CN" data-mountain="MOUNTAIN_NAME">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å¤ªé˜³å±±æ¢ç´¢ä¹‹æ—…</title>
    <link rel="stylesheet" href="css/color-schemes.css">
    <link rel="stylesheet" href="css/MOUNTAIN_NAME-mountain.css">
    <link rel="stylesheet" href="css/sun-mountain.css">
</head>
<body>
    <button class="back-btn" onclick="goBack()">â† è¿”å›é€‰æ‹©</button>
</body>
</html>
    <!-- è¿›åº¦æ˜¾ç¤º -->
    <div class="progress-display">
        <span class="mountain-progress">å¤ªé˜³å±±è¿›åº¦ï¼š<span id="mountain-progress">0/6</span></span>
        <span class="total-progress">æ€»è¿›åº¦ï¼š<span id="total-progress">0/420</span></span>
    </div>
    
    <div class="mountain-scene">
        <!-- å¤ªé˜³ -->
        <div class="sun"></div>
        
        <!-- äº‘æœµ -->
        <div class="cloud cloud1"></div>
        <div class="cloud cloud2"></div>
        
        <!-- å±±è„‰å±‚æ¬¡ -->
        <div class="distant-mountains"></div>
        <div class="middle-mountains"></div>
        <div class="front-mountains"></div>

        <!-- å››æ¡æ–‡æ˜ä¹‹æ²³ -->
        <div class="rivers">
            <div class="river river-china" title="å¤ä¸­å›½æ²³"></div>
            <div class="river river-greece" title="å¤å¸Œè…Šæ²³"></div>
            <div class="river river-india" title="å¤å°åº¦æ²³"></div>
            <div class="river river-hebrew" title="å¤å¸Œä¼¯æ¥æ²³"></div>
        </div>
        
        <!-- æ²³è¾¹çš„æ™ºè€…ä»¬ -->
        <div class="sages-by-river">
            <div class="sage-figure sage-confucius" data-sage="confucius" onclick="exploreRiver('confucius')">
                <div class="sage-avatar">ğŸ‘¨â€ğŸ«</div>
                <div class="sage-name">å­”å­</div>
            </div>
            
            <div class="sage-figure sage-socrates" data-sage="socrates" onclick="exploreRiver('socrates')">
                <div class="sage-avatar">ğŸ§”â€â™‚ï¸</div>
                <div class="sage-name">è‹æ ¼æ‹‰åº•</div>
            </div>
            
            <div class="sage-figure sage-plato" data-sage="plato" onclick="exploreRiver('plato')">
                <div class="sage-avatar">ğŸ‘¨â€ğŸ“</div>
                <div class="sage-name">æŸæ‹‰å›¾</div>
            </div>
            
            <div class="sage-figure sage-buddha" data-sage="buddha" onclick="exploreRiver('buddha')">
                <div class="sage-avatar">ğŸ§˜â€â™‚ï¸</div>
                <div class="sage-name">ä½›é™€</div>
            </div>
            
            <div class="sage-figure sage-jesus" data-sage="jesus" onclick="exploreRiver('jesus')">
                <div class="sage-avatar">ğŸ‘¨â€ğŸ’¼</div>
                <div class="sage-name">è€¶ç¨£</div>
            </div>
            
            <div class="sage-figure sage-zhuangzi" data-sage="zhuangzi" onclick="exploreRiver('zhuangzi')">
                <div class="sage-avatar">ğŸ§™â€â™‚ï¸</div>
                <div class="sage-name">åº„å­</div>
            </div>
        </div>
        
        <!-- å¯¼æ¸¸äººç‰©å’Œå¯¹è¯æ°”æ³¡ -->
        <div class="guide-section">
            <div class="guide-character">
                <div class="guide-avatar">ğŸ§™â€â™‚ï¸</div>
                <div class="guide-name">æ™ºæ…§å‘å¯¼</div>
            </div>
            <div class="speech-bubble">
                <div class="bubble-content">
                    <h3>ğŸŒ„ åœ¨å¤©å¤–ï¼Œæœ‰ä¸€åº§å¤ªé˜³ä¹‹å±±</h3>
                    <p>å¤ªé˜³å±±é‡Œæœ‰ä¸€æ¡æ²³ï¼Œå«æ–‡æ˜ä¹‹æ²³ï¼Œæ²³æ°´ç»ˆæ—¥å·æµä¸æ¯ï¼Œå­•è‚²äº†äººç±»çš„æ–‡æ˜ã€‚ä»–ä»¬åˆ†åˆ«æ˜¯å¤ä¸­å›½æ²³ã€å¤å¸Œè…Šæ²³ã€å¤å°åº¦æ²³ã€å¤å¸Œä¼¯æ¥æ²³ã€‚</p>
                </div>
                <div class="bubble-tail"></div>
            </div>
        </div>

        <!-- æ¢ç´¢æç¤º -->
        <div class="exploration-hint">
            ğŸ‘¥ ç‚¹å‡»æ²³è¾¹çš„æ™ºè€…å¼€å§‹å¯¹è¯
        </div>
    </div>

    <script>
        // è¿”å›å…¨æ™¯å›¾
        function goBack() {
            window.location.href = 'index.html';
        }

        // æ‹œè®¿æ™ºè€…
        function exploreRiver(sageId) {
    // è·³è½¬åˆ°æ­£ç¡®çš„è·¯å¾„
    if (sageId === 'zhuangzi') {
        window.location.href = 'sages/sun/zhuangzi.html';  // â† æ­£ç¡®çš„è·¯å¾„
    } else {
        window.location.href = `sages/sun/${sageId}.html`;
    }
}

        // æ£€æŸ¥å±±å³°å®ŒæˆçŠ¶æ€
        function checkMountainComplete() {
            const visitedSages = JSON.parse(localStorage.getItem('visitedSages') || '[]');
            const sunSages = ['confucius', 'socrates', 'plato', 'buddha', 'jesus', 'zhuangzi'];
            const completedCount = sunSages.filter(sage => visitedSages.includes(`sun-${sage}`)).length;
            
            document.getElementById('mountain-progress').textContent = `${completedCount}/6`;
            document.getElementById('total-progress').textContent = `${visitedSages.length}/420`;
            
            // æ›´æ–°æ™ºè€…çŠ¶æ€æ˜¾ç¤º
            sunSages.forEach(sage => {
                const sageElement = document.querySelector(`[data-sage="${sage}"]`);
                if (visitedSages.includes(`sun-${sage}`)) {
                    sageElement.classList.add('visited');
                }
            });
            
            // åªæœ‰åœ¨åˆšå¥½å®Œæˆå¤ªé˜³å±±æ—¶æ˜¾ç¤ºæç¤ºï¼ˆé¿å…é‡å¤æ˜¾ç¤ºï¼‰
if (completedCount === 6 && !localStorage.getItem('sunMountainCompleted')) {
    localStorage.setItem('sunMountainCompleted', 'true');
    showNextMountainOption();
}
        }

        // æ˜¾ç¤ºå‰å¾€ä¸‹ä¸€åº§å±±çš„é€‰é¡¹
        function showNextMountainOption() {
    const modal = document.createElement('div');
    modal.style.cssText = `
        position: fixed; top: 0; left: 0; width: 100%; height: 100%;
        background: rgba(0,0,0,0.7); display: flex; justify-content: center; align-items: center; z-index: 2000;
    `;
    
    modal.innerHTML = `
        <div style="background: white; padding: 30px; border-radius: 15px; text-align: center; max-width: 400px; position: relative;">
            <!-- Xå…³é—­æŒ‰é’® -->
           <span onclick="this.parentElement.parentElement.remove()" 
      style="position: absolute; top: 15px; right: 20px; cursor: pointer; font-size: 24px; color: #999; font-weight: bold; user-select: none;">&times;</span>
            
            <h3 style="color: #8B4513; margin-bottom: 20px;">ğŸ‰ æ­å–œå®Œæˆå¤ªé˜³å±±æ¢ç´¢ï¼</h3>
            <p style="margin-bottom: 20px;">ä½ å·²æ‹œè®¿äº†å¤ªé˜³å±±çš„æ‰€æœ‰6ä½æ™ºè€…ï¼Œè·å¾—äº†æ–‡æ˜ä¹‹æºçš„æ™ºæ…§ã€‚</p>
            
            <button onclick="goToNextMountain()" style="background: #FF8C00; color: white; border: none; padding: 12px 25px; border-radius: 25px; margin: 5px; cursor: pointer;">å‰å¾€æœˆäº®å±±</button>
            <button onclick="goBack()" style="background: #8B4513; color: white; border: none; padding: 12px 25px; border-radius: 25px; margin: 5px; cursor: pointer;">è¿”å›å…¨æ™¯</button>
        </div>
    `;
    
    document.body.appendChild(modal);
}

        // å‰å¾€ä¸‹ä¸€åº§å±±
        function goToNextMountain() {
            window.location.href = 'moon-mountain.html';
        }

        // é¡µé¢åŠ è½½æ—¶æ£€æŸ¥çŠ¶æ€
        window.addEventListener('load', checkMountainComplete);
    </script>
</body>
<!-- åœ¨ sun-mountain.html ä¸­æ›¿æ¢éŸ³é¢‘éƒ¨åˆ†ä¸ºè¿™ä¸ªç‰ˆæœ¬ -->

<!-- èƒŒæ™¯éŸ³ä¹ -->
<audio id="bgMusic" loop>
    <source src="music/sun-mountain-bg.mp3" type="audio/mpeg">
    <source src="music/sun-mountain-bg.ogg" type="audio/ogg">
</audio>

<!-- éŸ³ä¹æ§åˆ¶æŒ‰é’® -->
<button class="music-toggle" id="musicBtn" onclick="toggleBgMusic()">ğŸµ</button>

<!-- CSSæ ·å¼ -->
<style>
.music-toggle {
    position: fixed;
    top: 70px;
    right: 20px;
    background: rgba(255, 255, 255, 0.9);
    border: none;
    border-radius: 50%;
    width: 50px;
    height: 50px;
    font-size: 20px;
    cursor: pointer;
    z-index: 1001;
    transition: all 0.3s ease;
    box-shadow: 0 2px 10px rgba(0,0,0,0.2);
}

.music-toggle:hover {
    transform: scale(1.1);
    background: rgba(255, 255, 255, 1);
}
</style>

<script>
const bgMusic = document.getElementById('bgMusic');
const musicBtn = document.getElementById('musicBtn');

// è®¾ç½®åˆå§‹éŸ³é‡
if (bgMusic) {
    bgMusic.volume = 0.3;
}

// åˆ‡æ¢èƒŒæ™¯éŸ³ä¹
function toggleBgMusic() {
    if (!bgMusic) return;
    
    if (bgMusic.paused) {
        bgMusic.play().then(() => {
            musicBtn.textContent = 'ğŸ”Š';
        }).catch(error => {
            console.log('æ’­æ”¾å¤±è´¥ï¼Œè¯·æ£€æŸ¥éŸ³é¢‘æ–‡ä»¶');
        });
    } else {
        bgMusic.pause();
        musicBtn.textContent = 'ğŸ”‡';
    }
}

// ç”¨æˆ·é¦–æ¬¡äº¤äº’æ—¶å°è¯•æ’­æ”¾
let hasInteracted = false;
document.addEventListener('click', function() {
    if (!hasInteracted && bgMusic) {
        hasInteracted = true;
        bgMusic.play().then(() => {
            musicBtn.textContent = 'ğŸ”Š';
        }).catch(() => {
            // é™é»˜å¤„ç†ï¼Œä¸æ˜¾ç¤ºé”™è¯¯
        });
    }
});
</script>
</html>